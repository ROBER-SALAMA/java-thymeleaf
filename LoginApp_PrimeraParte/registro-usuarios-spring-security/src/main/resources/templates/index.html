<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
    <head>
        <meta charset="utf-8">
        <title>Inicio</title>

        <!-- Bootstrap CSS -->
        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
              integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
              crossorigin="anonymous">

        <style>
            body {
                margin: 0;
                font-family: "Segoe UI", sans-serif;
                background-color: #f4f4f9;
            }

            /* Men√∫ lateral fijo */
            .sidebar {
                height: 100%;
                width: 230px;
                position: fixed;
                top: 0;
                left: 0;
                background-color: #222;
                padding-top: 60px;
            }

            .sidebar h3 {
                color: #fff;
                text-align: center;
                margin-bottom: 30px;
            }

            .sidebar a, .dropdown-btn, .dropdown-btn2 {
                padding: 12px 20px;
                text-decoration: none;
                font-size: 16px;
                color: #ddd;
                display: block;
                border: none;
                background: none;
                width: 100%;
                text-align: left;
                cursor: pointer;
                outline: none;
                transition: 0.3s;
            }

            .sidebar a:hover, .dropdown-btn:hover, .dropdown-btn2:hover {
                background-color: #444;
                color: #fff;
            }

            /* Contenedores de submen√∫s */
            .dropdown-container, .dropdown-container2 {
                display: none;
                background-color: #333;
                padding-left: 15px;
            }

            .dropdown-container a, .dropdown-container2 a {
                font-size: 15px;
                color: #ccc;
            }

            .dropdown-container a:hover, .dropdown-container2 a:hover {
                color: #fff;
            }

            /* Contenedor principal */
            .main-content {
                margin-left: 230px;
                padding: 30px;
            }

            .main-content h1 {
                font-size: 22px;
                margin-bottom: 20px;
            }

            table {
                background: white;
                border-radius: 6px;
                overflow: hidden;
            }
        </style>
    </head>
    <body>

        <!-- Men√∫ lateral -->
        <div class="sidebar">
            <h3>Men√∫ Principal</h3>

            <!-- Mantenimiento -->
            <button class="dropdown-btn">üõ†Ô∏è Mantenimiento ‚ñº</button>
            <div class="dropdown-container">
                <a th:href="@{/usuarios}">üë§ Usuarios</a>
                <a th:href="@{/clientes}">üë• Clientes</a>
                <a th:href="@{/proveedores}">üè¢ Proveedores</a>
                <a th:href="@{/productos}">üì¶ Productos</a>
                <a th:href="@{/roles}">‚öôÔ∏è Roles</a>
            </div>

            <!-- Procesos -->
            <button class="dropdown-btn2">‚öôÔ∏è Procesos ‚ñº</button>
            <div class="dropdown-container2">
                <a th:href="@{/compras}">üõí Compras</a>
                <a th:href="@{/ventas}">üí∞ Ventas</a>
                <a th:href="@{/inventarios}">üìä Inventarios</a>
            </div>

            <!-- Cerrar sesi√≥n -->
            <a sec:authorize="isAuthenticated()" th:href="@{/logout}">üö™ Cerrar sesi√≥n</a>
            <a th:href="@{/acerca}">‚ÑπÔ∏è Acerca de</a>

        </div>

        <!-- Contenido principal -->
        <div class="main-content container">
            <h1>Registro e inicio de sesi√≥n con Spring Boot + Spring Security + Thymeleaf + Hibernate + MySQL</h1>
            <h4>Bienvenido <span sec:authentication="principal.username"></span></h4>
            <br>

            <table class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Apellido</th>
                        <th>Email</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="usuario : ${usuarios}">
                        <td th:text="${usuario.id}"></td>
                        <td th:text="${usuario.nombre}"></td>
                        <td th:text="${usuario.apellido}"></td>
                        <td th:text="${usuario.email}"></td>
                        <td>
                            <a th:href="@{'/registro/editar/' + ${usuario.id}}" class="btn btn-success btn-sm">Editar</a>
                            <a th:href="@{'/registro/eliminar/' + ${usuario.id}}" class="btn btn-danger btn-sm">Eliminar</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <!-- Bootstrap JS -->
        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>

        <!-- Script para los dropdowns -->
        <script>
            // Dropdown 1 (Mantenimiento)
            const dropdowns = document.getElementsByClassName("dropdown-btn");
            for (let i = 0; i < dropdowns.length; i++) {
                dropdowns[i].addEventListener("click", function () {
                    this.classList.toggle("active");
                    const dropdownContent = this.nextElementSibling;
                    dropdownContent.style.display =
                            dropdownContent.style.display === "block" ? "none" : "block";
                });
            }

            // Dropdown 2 (Procesos)
            const dropdowns2 = document.getElementsByClassName("dropdown-btn2");
            for (let i = 0; i < dropdowns2.length; i++) {
                dropdowns2[i].addEventListener("click", function () {
                    this.classList.toggle("active");
                    const dropdownContent = this.nextElementSibling;
                    dropdownContent.style.display =
                            dropdownContent.style.display === "block" ? "none" : "block";
                });
            }
        </script>

    </body>
</html>
