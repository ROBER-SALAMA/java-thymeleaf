<!DOCTYPE html>
<html
    xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/base}"
    >
    <head>
        <title>Citas</title>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
            />
    </head>
    <body class="bg-gray-100">
        <div layout:fragment="content" class="w-full h-full">
            <div class="max-w-[84rem] mx-4">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">GestiÃ³n de Citas</h1>

                <div class="mb-6">
                    <a
                        th:href="@{/citas/nueva}"
                        class="inline-flex items-center bg-[#1B8064] text-white px-4 py-2 rounded-md hover:bg-[#3DBA95] transition-colors duration-150 text-sm font-medium"
                        >
                        <i class="bi bi-plus-circle"></i> Nueva Cita
                    </a>
                </div>

                <!-- GRID DE CARDS -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-4">

                    <div th:each="cita : ${citas}" class="bg-white shadow-lg rounded-xl p-5">

                        <!-- ID -->
                        <p class="text-sm text-gray-400 mb-1">ID: <span th:text="${cita.id}"></span></p>

                        <!-- Encabezado: correo + mascota -->
                        <h2 class="text-xl font-bold text-gray-800 leading-tight">
                            <span th:text="${cita.mascota.nombre}"></span>
                        </h2>

                        <p class="text-gray-600 text-sm mb-3" th:text="${cita.correoElectronico}"></p>

                        <!-- Datos -->
                        <div class="text-gray-700 text-sm space-y-2">

                            <p>
                                <strong>Servicio:</strong>
                                <span th:text="${cita.servicio.nombre}"></span>
                            </p>

                            <p>
                                <strong>Fecha:</strong>
                                <span th:text="${cita.fechaPreferida}"></span>
                            </p>

                            <p>
                                <strong>Hora:</strong>
                                <span th:text="${cita.horaPreferida}"></span>
                            </p>
                        </div>

                        <!-- Acciones -->
                        <div class="mt-4 flex justify-center gap-2">

                            <a th:href="@{'/citas/detalles/' + ${cita.id}}"
                               class="inline-flex items-center bg-blue-600 text-white px-3 py-2 rounded-md hover:bg-blue-700 transition text-sm">
                                <i class="bi bi-eye"></i> Ver
                            </a>

                            <a th:href="@{'/citas/editar/' + ${cita.id}}"
                               class="inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-md hover:bg-green-700 transition text-sm">
                                <i class="bi bi-pencil-square"></i> Editar
                            </a>

                            <a th:href="@{'/citas/eliminar/' + ${cita.id}}"
                               onclick="return confirm('Â¿Eliminar esta cita?')"
                               class="inline-flex items-center bg-red-600 text-white px-3 py-2 rounded-md hover:bg-red-700 transition text-sm">
                                <i class="bi bi-trash3-fill"></i> Eliminar
                            </a>

                        </div>

                    </div>
                </div>


                <div
                    th:if="${#lists.isEmpty(citas)}"
                    class="mt-6 bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded relative"
                    role="alert"
                    >
                    <strong class="font-bold">No hay citas registradas.</strong>
                    <span class="block sm:inline">
                        Haz clic en "Nueva Cita" para agregar una.
                    </span>
                </div>
            </div>
        </div>
    </body>
</html>
